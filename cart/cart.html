<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="lib/layer/mobile/need/layer.css" />
		<link rel="stylesheet" type="text/css" href="css/cart.css" />
	</head>
	<body>
		<div class="header">
			<div class="container">
				<div class="title_box">
					<div class="left">
						<img src="img/0-10/back.png">
						<div class="name">
							购物车
						</div>
					</div>
					<div class="more">
						<img src="img/0-10/more.png">
					</div>
				</div>
			</div>
		</div>
		<ul class="cart_box">
			<div class="container">
				<li class="cart">
					<div class="choose relative"><img src="img/0-10/choose.png"></div>
					<div class="pro"><img src="img/0-10/8swiper.jpg"></div>
					<div class="txt">
						<a href="../pro_details/pro_details.html">
							<div class="name">水星家纺提花套件欧式简约提花四件套侧耳倾听1.5/1.8米床上用品</div>
						</a>
						<div class="type">1.8M床：适用2.2Mx2.4M被芯</div>
						<div class="price_box">
							<div class="price">￥<span>61.9</span></div>
							<div class="count">
								<div class="dec">-</div>
								<div class="num">1</div>
								<div class="add">+</div>
							</div>
						</div>
					</div>
				</li>
				<li class="cart">
					<div class="choose relative"><img src="img/0-10/choose.png"></div>
					<div class="pro"><img src="img/0-10/8swiper.jpg"></div>
					<div class="txt">
						<a href="../pro_details/pro_details.html">
							<div class="name">水星家纺提花套件欧式简约提花四件套侧耳倾听1.5/1.8米床上用品</div>
						</a>
						<div class="type">1.8M床：适用2.2Mx2.4M被芯</div>
						<div class="price_box">
							<div class="price">￥<span>61.9</span></div>
							<div class="count">
								<div class="dec">-</div>
								<div class="num">1</div>
								<div class="add">+</div>
							</div>
						</div>
					</div>
				</li>
			</div>
		</ul>
		<div class="together">
			<div class="name">
				大家都在买
			</div>
			<a href="../pro_details/pro_details.html">
				<div class="hot_box">
					<div class="img"><img src="img/0-10/photo_1.jpg"></div>
					<div class="right">
						<div class="title">高端GNF不锈钢脚踏垃圾桶家用40L大容量30L厨房25L客厅8L有盖...</div>
						<div class="hot_pirce_box">
							<div class="hot_pirce_logo">
								<img src="img/0-10/icon1.png"><span>积分折扣：</span>27.9
							</div>
							<div class="price_box">
								<div class="hot_pirce_handle">到手价</div>
								<div class="hot_pirce"><span>￥</span>61.9</div>
							</div>
						</div>
						<div class="gain">
							<div class="gain_logo">
								<img src="img/0-10/icon2.png"><span>赚￥</span> 13.19
							</div>
							<div class="ratio">佣金比例：15.00%</div>
						</div>
					</div>
				</div>
			</a>
			<a href="../pro_details/pro_details.html">
				<div class="hot_box">
					<div class="img"><img src="img/0-10/photo_1.jpg"></div>
					<div class="right">
						<div class="title">高端GNF不锈钢脚踏垃圾桶家用40L大容量30L厨房25L客厅8L有盖...</div>
						<div class="hot_pirce_box">
							<div class="hot_pirce_logo">
								<img src="img/0-10/icon1.png"><span>积分折扣：</span>27.9
							</div>
							<div class="price_box">
								<div class="hot_pirce_handle">到手价</div>
								<div class="hot_pirce"><span>￥</span>61.9</div>
							</div>
						</div>
						<div class="gain">
							<div class="gain_logo">
								<img src="img/0-10/icon2.png"><span>赚￥</span> 13.19
							</div>
							<div class="ratio">佣金比例：15.00%</div>
						</div>
					</div>
				</div>
			</a>
			<a href="../pro_details/pro_details.html">
				<div class="hot_box">
					<div class="img"><img src="img/0-10/photo_1.jpg"></div>
					<div class="right">
						<div class="title">高端GNF不锈钢脚踏垃圾桶家用40L大容量30L厨房25L客厅8L有盖...</div>
						<div class="hot_pirce_box">
							<div class="hot_pirce_logo">
								<img src="img/0-10/icon1.png"><span>积分折扣：</span>27.9
							</div>
							<div class="price_box">
								<div class="hot_pirce_handle">到手价</div>
								<div class="hot_pirce"><span>￥</span>61.9</div>
							</div>
						</div>
						<div class="gain">
							<div class="gain_logo">
								<img src="img/0-10/icon2.png"><span>赚￥</span> 13.19
							</div>
							<div class="ratio">佣金比例：15.00%</div>
						</div>
					</div>
				</div>
			</a>
		</div>
		<div class="buy_box">
			<div class="left">
				<div class="choose relative"><img src="img/0-10/choose.png"></div>
				全选
			</div>
			<div class="right">
				<div class="price">
					合计：<i>￥</i><span>0</span>
				</div>
				<a href="../confirm_order/confirm.html">
					<div class="buynow">
					下单
				</div></a>
			</div>
		</div>
		<script src="js/jquery-3.4.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/layer/layer.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			//全选-----正方向 点击全选中/全取消
			$('.buy_box .choose').click(function() {
				var Dis = $(this).children().css('display');
				if (Dis == 'block') {
					$(this).children().css('display', 'none');
					$('.cart .choose').children().css('display', 'none');
				} else {
					$(this).children().css('display', 'block');
					$('.cart .choose').children().css('display', 'block');
				}
				totalprice();
			});

			$('.cart .choose').click(function() {
				var Dis = $(this).children().css('display');
				if (Dis == 'block') {
					$(this).children().css('display', 'none');
				} else {
					$(this).children().css('display', 'block');
				}
				//全选-----反方向 商品全部勾选则全选按钮点亮
				var sum = 0;
				$('.cart .choose').each(function() {
					if ($(this).children().css('display') == 'block') {
						sum++;
					}
				});
				if (sum == $('.cart .choose').length) {
					$('.buy_box .choose').children().css('display', 'block');
				} else {
					$('.buy_box .choose').children().css('display', 'none');
				}
				totalprice();

			});
			// 计算总价格的函数
			function totalprice() {
				var totalprice = 0;
				$('.cart .choose').each(function() {
					var total;
					if ($(this).children().css('display') == 'block') {
						var price = $(this).siblings('.txt').find('.price span').text().trim();
						var number = $(this).siblings('.txt').find('.count .num').text().trim();
						total = parseFloat(price) * parseFloat(number);
					} else {
						total = 0;
					}
					totalprice += total;
				})
				totalprice = totalprice.toFixed(2);
				$('.buy_box span').text(totalprice);
			}
			// 数量
			$('.cart .count .dec').click(function() {
				var num = $(this).siblings('.num').text().trim();
				if (num > 1) {
					num--;
				} else {
					num = 1;
				}
				$(this).siblings('.num').text(num);
				totalprice();
			})

			$('.cart .count .add').click(function() {
				var num = $(this).siblings('.num').text().trim();
				if (num < 9) {
					num++;
				} else {
					num = 9;
					layer.msg('库存不足')
				}
				$(this).siblings('.num').text(num);
				totalprice();
			})
			
			// 返回上一页
			$('.header .left img').click(function () {
				history.back();
			})
		</script>
	</body>
</html>
